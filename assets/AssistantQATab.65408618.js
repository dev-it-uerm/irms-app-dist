import{m as D,_ as y,o as c,g as f,w as a,e as t,h as g,d as e,a5 as b,ac as w,ab as q,I as T,a3 as A,c as h,R as Q,a6 as N,a2 as I,f as F,Q as R,Z as S,aX as k}from"./index.36e574ce.js";import{Q as _,a as m}from"./QCardSection.f24fecdc.js";import{a as x,Q as U}from"./QTd.c4755833.js";import{Q as z}from"./QTooltip.54095080.js";import{a as v,Q as u}from"./QDialog.98f0736e.js";import{Q as E}from"./QTable.32af86ff.js";import{C as L}from"./ClosePopup.57eb9561.js";import{_ as j}from"./OMBRE-GRAY.d27a82e0.js";import"./QMarkupTable.210beb1d.js";import"./QSelect.2dcbcb9d.js";const P={props:{items:Array,columns:Array,getAssistantQAs:Function},data(){return{IRAQADetailss:[],disAllDivCode:[],IRDialog:!1,isLoadingIRDetails:!1,IrNo:"",pdfDisplayDialog:!1,pdfUrl:null,maximizedToggle:null,subjectFileName:null,subjectFile:null}},computed:{...D({getAssistantQAForm:"ApplyStore/getAssistantQAForm",getAssistantDivision:"ApplyStore/getAssistantDivision"}),filteredDivCodeOptions(){return this.disAllDivCode.filter(i=>i.divisionCode!=this.DivisionCode)}},created(){this.getDivisioncode()},methods:{FormatDate(i){const o=new Date(i),l={year:"numeric",month:"long",day:"2-digit"};return o.toLocaleDateString("en-US",l).toUpperCase().replace(/\s/g," ")},FormatDateIR(i){const o=new Date(i),l={year:"numeric",month:"long",day:"2-digit"};return o.toLocaleDateString("en-US",l).toUpperCase().replace(/\s/g," ")},FormatTime(i){const o=new Date(i);let l=o.getHours();const r=o.getMinutes().toString().padStart(2,"0"),s=l>=12?"PM":"AM";return l=l%12,l=l||12,`${l}:${r} ${s}`},async viewIReport(i){try{this.IRDialog=!0,this.isLoadingIRDetails=!0;const o={iRNo:i};this.selectedIrNo=i;const l=await this.$store.dispatch("ApplyStore/disAQA",o);this.IRAQADetailss=this.getAssistantQAForm}catch(o){console.error("Error inserting data:",o)}finally{this.isLoadingIRDetails=!1}},viewPDF(i,o){const l=i.replace(/^data:application\/pdf;base64,/,""),r=atob(l),s=new Array(r.length);for(let n=0;n<r.length;n++)s[n]=r.charCodeAt(n);const d=new Uint8Array(s),p=new Blob([d],{type:"application/pdf"});this.pdfUrl=URL.createObjectURL(p),this.pdfDisplayDialog=!0},closepdf(){this.pdfDisplayDialog=!1,this.subjectFile=null},async getDivisioncode(){try{await this.$store.dispatch("ApplyStore/disDivisionCode"),this.disAllDivCode=this.getAssistantDivision}catch(i){console.error("Error inserting data:",i)}}}},V={class:"QAModuleDiag"},O=e("div",{class:"text-secondary text-weight-bold",style:{"font-size":"25px",color:"#002b5c"}}," INCIDENT REPORT INFORMATION ",-1),B=e("div",{class:"q-mt-md text-primary text-weight-medium"}," Loading incident details... ",-1),M={class:"row q-col-gutter-md q-mx-lg"},Y={class:"col-6"},W=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Incident Report Number ",-1),G={class:"col-6"},H=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Date Report Created ",-1),X={class:"QADesContent"},Z={class:"QAFixDesign"},J={class:"QADes1"},K=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," General Information ",-1),$=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," This section contains essential details regarding the incident, including the date, time, location, individuals involved, and the nature of the incident. ",-1),ee={class:"row q-col-gutter-md q-mx-lg q-mt-xs"},te={class:"col-6"},se=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Incident Brief Description ",-1),oe={class:"col-6"},ie=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Location of the Incident ",-1),le={class:"row q-col-gutter-md q-mx-lg q-mt-xs"},ae={class:"col-6"},ne=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Date of the Incident ",-1),de={class:"col-6"},re=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Time of the Incident ",-1),ce={class:"QADesContent"},ue={class:"QAFixDesign"},me={class:"QADes1"},pe=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Attached File ",-1),he=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," The attached files support the accurate review and proper documentation of this incident report. ",-1),_e={class:"text-red text-subtitle2 text-weight-bold q-mb-sx q-mx-xl"},fe={key:0,class:"QAFileDes row flex-start q-mx-xl",style:{"border-radius":"25px"}},ge=["onClick"],Ae={style:{display:"flex","align-items":"center",gap:"10px","background-color":"#f5f5f5",padding:"8px 12px","border-radius":"6px",border:"1px solid #dcdcdc",width:"fit-content"}},be={class:"text-dark text-subtitle2"},xe={class:"bg-info text-white"},ve=e("div",{class:"text-h6 q-mx-md"},"UPLOADED PDF FILES",-1),De=["src"],ye={key:1,class:"QAFileDes column flex-center q-mx-xl",style:{"border-radius":"25px"}},we=e("div",{class:"text-subtitle1 items-center text-weight-bold text-dark"},[e("i",null,"~ NO FILE ATTACHED ~")],-1),Qe=[we],Ie={class:"QADesContent"},Re={class:"QAFixDesign"},Ce={class:"QADes1"},qe=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Narrative Description of the Incident ",-1),Te=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," Provided detailed of how the incident transpired, including the sequence of events, contributing factors, and individuals involved. ",-1),Ne={class:"q-mx-xl"},Fe={class:"QADesContent"},Se={class:"QAFixDesign"},ke={class:"QADes1"},Ue=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Possible Causes of the Incident ",-1),ze=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," Possible reason on the perspective of the Informant. ",-1),Ee={class:"q-mx-xl"},Le={class:"QADesContent"},je={class:"QAFixDesign"},Pe={class:"QADes1"},Ve=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Immediate Response ",-1),Oe=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," Action taken by the concerned department or by the Informant to ease the incident. ",-1),Be={class:"q-mx-xl"},Me={class:"text-bold text-center text-uppercase"};function Ye(i,o,l,r,s,d){return c(),f(E,{rows:l.items,columns:l.columns,"row-key":"IRNo"},{"body-cell-viewIR":a(p=>[t(x,null,{default:a(()=>[t(g,{flat:"",rounded:"",push:"",onClick:n=>d.viewIReport(p.row.iRNo),ripple:{center:!0},icon:"description",class:"bg-accent text-black text-bold text-center shadow-5",style:{"border-radius":"20px",width:"125px"}},null,8,["onClick"]),t(v,{maximized:"",modelValue:s.IRDialog,"onUpdate:modelValue":o[3]||(o[3]=n=>s.IRDialog=n),persistent:""},{default:a(()=>[e("div",V,[t(b,{class:"contentFormQAModule"},{default:a(()=>[t(_,{class:"q-mb-sm row items-center justify-between"},{default:a(()=>[O,w((c(),f(g,{flat:"",icon:"close",style:{color:"#003566","background-color":"rgba(22, 110, 204, 0.1)"},onClick:o[0]||(o[0]=n=>s.IRDialog=!1)},{default:a(()=>[t(z,{class:"bg-info text-white"},{default:a(()=>[q(" Close Form ")]),_:1})]),_:1})),[[L]])]),_:1}),s.isLoadingIRDetails?(c(),f(_,{key:0,class:"column flex-center q-pa-xl",style:{height:"400px"}},{default:a(()=>[t(T,{size:"60px",color:"primary"}),B]),_:1})):(c(),f(_,{key:1,style:{border:"2px solid #6b7c93"}},{default:a(()=>[e("div",M,[e("div",Y,[W,t(m,{rounded:"",outlined:"","model-value":s.IRAQADetailss.iRNo,disable:""},null,8,["model-value"])]),e("div",G,[H,t(m,{rounded:"",outlined:"","model-value":d.FormatDateIR(s.IRAQADetailss.dateTimeCreated),disable:""},null,8,["model-value"])])]),t(u,{class:"formseparatorWhite"}),e("div",X,[e("div",Z,[e("div",J,[K,$,t(u,{class:"formseparatorYellow"}),e("div",ee,[e("div",te,[se,e("span",null,[t(m,{rounded:"",outlined:"",autogrow:"","model-value":s.IRAQADetailss.subjectBriefDes,disable:""},null,8,["model-value"])])]),e("div",oe,[ie,t(m,{rounded:"",outlined:"","model-value":s.IRAQADetailss.subjectLoc,disable:""},null,8,["model-value"])])]),e("div",le,[e("div",ae,[ne,t(m,{rounded:"",outlined:"","model-value":d.FormatDate(s.IRAQADetailss.subjectDate),disable:""},null,8,["model-value"])]),e("div",de,[re,t(m,{rounded:"",outlined:"","model-value":d.FormatTime(s.IRAQADetailss.subjectTime),disable:""},null,8,["model-value"])])])])])]),t(u,{class:"formseparatorWhite"}),e("div",ce,[e("div",ue,[e("div",me,[pe,he,t(u,{class:"formseparatorYellow"}),e("div",_e," Number of file: "+A(s.IRAQADetailss.totalAttachments),1),s.IRAQADetailss.files&&s.IRAQADetailss.files.length?(c(),h("div",fe,[(c(!0),h(Q,null,N(s.IRAQADetailss.files,(n,C)=>(c(),h("div",{key:C,style:{display:"flex","align-items":"start",gap:"5px",background:"#e3f2fd",padding:"8px","border-radius":"4px","margin-bottom":"5px",cursor:"pointer"},onClick:F(ot=>d.viewPDF(n.subjectFile,n.subjectFileName),["stop"])},[e("div",Ae,[t(R,{name:"description",size:"24px",color:"grey-7"}),e("div",be,A(n.subjectFileName),1)])],8,ge))),128)),t(v,{modelValue:s.pdfDisplayDialog,"onUpdate:modelValue":o[2]||(o[2]=n=>s.pdfDisplayDialog=n)},{default:a(()=>[t(b,{style:{width:"90vw","max-width":"1100px"}},{default:a(()=>[e("div",xe,[ve,t(g,{icon:"close",flat:"",round:"",dense:"",onClick:o[1]||(o[1]=n=>s.pdfDisplayDialog=!1),class:"absolute-top-right"})]),t(_,null,{default:a(()=>[s.pdfUrl?(c(),h("iframe",{key:0,src:s.pdfUrl,width:"100%",height:"600px",style:{border:"none"}},null,8,De)):I("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):(c(),h("div",ye,Qe))])])]),t(u,{class:"formseparatorWhite"}),e("div",Ie,[e("div",Re,[e("div",Ce,[qe,Te,t(u,{class:"formseparatorYellow"}),e("div",Ne,[t(m,{autogrow:"",rounded:"",outlined:"","model-value":s.IRAQADetailss.subjectNote,disable:"","input-class":"q-pa-md"},null,8,["model-value"])])])])]),t(u,{class:"formseparatorWhite"}),e("div",Fe,[e("div",Se,[e("div",ke,[Ue,ze,t(u,{class:"formseparatorYellow"}),e("div",Ee,[t(m,{autogrow:"",rounded:"",outlined:"","model-value":s.IRAQADetailss.subjectCause,disable:"","input-class":"q-pa-md"},null,8,["model-value"])])])])]),t(u,{class:"formseparatorWhite"}),e("div",Le,[e("div",je,[e("div",Pe,[Ve,Oe,t(u,{class:"formseparatorYellow"}),e("div",Be,[t(m,{autogrow:"",rounded:"",outlined:"","model-value":s.IRAQADetailss.subjectResponse,disable:"","input-class":"q-pa-md"},null,8,["model-value"])])])])])]),_:1}))]),_:1})])]),_:1},8,["modelValue"])]),_:2},1024)]),"body-cell-division":a(p=>[t(x,{props:p},{default:a(()=>[e("span",Me,A(p.row.division),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])}var We=y(P,[["render",Ye]]);const Ge={data(){return{loading:!0,showTable:!1,selectedStatus:null,searchContent:"",disAllAssistantQA:[],disColumns:[{name:"viewIR",label:"INCIDENT REPORT DETAILS",align:"left",field:"id"},{name:"IRNo",label:"IR NUMBER",align:"left",field:"iRNo"},{name:"departmentNumber",label:"INCIDENT RESPONDER (DEPARTMENT)",align:"left",field:"department_Description"},{name:"division",label:"DIVISION",align:"left",field:"Division"}]}},computed:{...D({getAssistantQA:"ApplyStore/getAssistantQA",getGoogleUser:"ApplyStore/getGoogleUser",loggedInUser:"ApplyStore/getUser",getQA:"ApplyStore/getQA"}),filteredDisAll(){const{disAllAssistantQA:i,searchContent:o}=this;let l=[...i];if(o&&typeof o=="string"){const r=o.toLowerCase();l=l.filter(s=>Object.values(s).some(d=>typeof d=="string"&&d.toLowerCase().includes(r)))}return l}},mounted(){setTimeout(()=>{this.showTable=!0,this.disAllAssistantQA,this.loading=!1},2e3)},created(){this.getAssistantQAs()},components:{AssistantQATable:We},methods:{async getAssistantQAs(){try{await this.$store.dispatch("ApplyStore/disAssistantQA"),this.disAllAssistantQA=this.getAssistantQA}catch(i){console.error("Error inserting data:",i)}},async selectStatus(i){this.selectedStatus=i}}},He={id:"q-app",style:{position:"relative","z-index":"1"}},Xe={style:{height:"100%",width:"100%"},class:"q-pa-lg"},Ze={class:"row items-center justify-between q-mb-md bg-white q-pa-sm rounded-borders shadow-1",style:{"border-radius":"10px"}},Je=e("div",null,[e("div",{class:"text-primary text-weight-bold",style:{"font-size":"30px"}}," ASSISTANT QUALITY ASSURANCE (AQA) MODULE "),e("div",{style:{"font-size":"18px",color:"#333333"}}," Incident Report Details ")],-1),Ke={class:"row items-center q-gutter-sm"},$e={key:0,class:"fixed-full flex flex-center column q-gutter-md",style:{"background-color":"rgba(255, 255, 255, 0.7)","z-index":"9999"}},et=e("div",{class:"text-subtitle1 text-primary"},"Please wait...",-1),tt=e("img",{src:j,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","z-index":"0"}},null,-1);function st(i,o,l,r,s,d){const p=S("AssistantQATable");return c(),h(Q,null,[e("div",He,[e("div",Xe,[e("div",Ze,[Je,e("div",Ke,[t(m,{modelValue:s.searchContent,"onUpdate:modelValue":o[0]||(o[0]=n=>s.searchContent=n),label:"SEARCH ",dense:"",outlined:"",rounded:""},{append:a(()=>[t(R,{name:"search",color:"info"})]),_:1},8,["modelValue"])])]),t(_,{class:"row bg-warning q-pa-md rounded-borders shadow-1",style:{"border-radius":"10px"}},{default:a(()=>[s.loading?(c(),h("div",$e,[t(U,{size:"150px",color:"primary"}),et])):I("",!0),t(_,{class:"column fit full-width"},{default:a(()=>[t(_,{class:"bg-white q-pa-sm rounded-borders shadow-1",style:{"border-radius":"10px"}},{default:a(()=>[w(t(p,{rows:d.filteredDisAll,columns:s.disColumns,"row-key":"IRNo",loading:s.loading,getAssistantQAs:d.getAssistantQAs,"virtual-scroll":"","hide-pagination":"","rows-per-page-options":[0]},null,8,["rows","columns","loading","getAssistantQAs"]),[[k,s.showTable]])]),_:1})]),_:1})]),_:1})])]),tt],64)}var ht=y(Ge,[["render",st]]);export{ht as default};
