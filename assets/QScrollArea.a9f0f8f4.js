import{q as n,M as x,r as u,ag as U,k as ee,C as s,T as re,J as oe,I as ne,P as F,p as te,E as ue,F as se,au as R,s as ce,av as V,A as ve,B as he,n as de,aw as fe,ax as W,ay as ge,ac as X,az as Y,aA as G}from"./index.9c8955a9.js";const me={ratio:[String,Number]};function be(t,f){return n(()=>{const g=Number(t.ratio||(f!==void 0?f.value:void 0));return isNaN(g)!==!0&&g>0?{paddingBottom:`${100/g}%`}:null})}const Se=16/9;var ye=x({name:"QImg",props:{...me,src:String,srcset:String,sizes:String,alt:String,crossorigin:String,decoding:String,referrerpolicy:String,draggable:Boolean,loading:{type:String,default:"lazy"},loadingShowDelay:{type:[Number,String],default:0},fetchpriority:{type:String,default:"auto"},width:String,height:String,initialRatio:{type:[Number,String],default:Se},placeholderSrc:String,fit:{type:String,default:"cover"},position:{type:String,default:"50% 50%"},imgClass:String,imgStyle:Object,noSpinner:Boolean,noNativeMenu:Boolean,noTransition:Boolean,spinnerColor:String,spinnerSize:String},emits:["load","error"],setup(t,{slots:f,emit:g}){const S=u(t.initialRatio),m=be(t,S),b=te(),{registerTimeout:o,removeTimeout:e}=U(),{registerTimeout:d,removeTimeout:P}=U(),c=[u(null),u(C())],h=u(0),v=u(!1),z=u(!1),L=n(()=>`q-img q-img--${t.noNativeMenu===!0?"no-":""}menu`),N=n(()=>({width:t.width,height:t.height})),Q=n(()=>`q-img__image ${t.imgClass!==void 0?t.imgClass+" ":""}q-img__image--with${t.noTransition===!0?"out":""}-transition`),H=n(()=>({...t.imgStyle,objectFit:t.fit,objectPosition:t.position}));ee(()=>O(),j);function A(){if(P(),t.loadingShowDelay===0){v.value=!0;return}d(()=>{v.value=!0},t.loadingShowDelay)}function q(){P(),v.value=!1}function O(){return t.src||t.srcset||t.sizes?{src:t.src,srcset:t.srcset,sizes:t.sizes}:null}function C(){return t.placeholderSrc!==void 0?{src:t.placeholderSrc}:null}function j(i){e(),z.value=!1,i===null?(q(),c[h.value^1].value=C()):A(),c[h.value].value=i}function $({target:i}){F(b)===!1&&(e(),S.value=i.naturalHeight===0?.5:i.naturalWidth/i.naturalHeight,M(i,1))}function M(i,T){T===1e3||F(b)===!0||(i.complete===!0?E(i):o(()=>{M(i,T+1)},50))}function E(i){F(b)!==!0&&(h.value=h.value^1,c[h.value].value=null,q(),z.value=!1,g("load",i.currentSrc||i.src))}function I(i){e(),q(),z.value=!0,c[h.value].value=null,c[h.value^1].value=C(),g("error",i)}function y(i){const T=c[i].value,w={key:"img_"+i,class:Q.value,style:H.value,alt:t.alt,crossorigin:t.crossorigin,decoding:t.decoding,referrerpolicy:t.referrerpolicy,height:t.height,width:t.width,loading:t.loading,fetchpriority:t.fetchpriority,"aria-hidden":"true",draggable:t.draggable,...T};return h.value===i?(w.class+=" q-img__image--waiting",Object.assign(w,{onLoad:$,onError:I})):w.class+=" q-img__image--loaded",s("div",{class:"q-img__container absolute-full",key:"img"+i},s("img",w))}function B(){return v.value===!1?s("div",{key:"content",class:"q-img__content absolute-full q-anchor--skip"},oe(f[z.value===!0?"error":"default"])):s("div",{key:"loading",class:"q-img__loading absolute-full flex flex-center"},f.loading!==void 0?f.loading():t.noSpinner===!0?void 0:[s(ne,{color:t.spinnerColor,size:t.spinnerSize})])}return j(O()),()=>{const i=[];return m.value!==null&&i.push(s("div",{key:"filler",style:m.value})),z.value!==!0&&(c[0].value!==null&&i.push(y(0)),c[1].value!==null&&i.push(y(1))),i.push(s(re,{name:"q-transition--fade"},B)),s("div",{class:L.value,style:N.value,role:"img","aria-label":t.alt},i)}}});const K=["vertical","horizontal"],J={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},Z={prevent:!0,mouse:!0,mouseAllDir:!0},p=t=>t>=250?50:Math.ceil(t/5);var _e=x({name:"QScrollArea",props:{...ue,thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function},setup(t,{slots:f,emit:g}){const S=u(!1),m=u(!1),b=u(!1),o={vertical:u(0),horizontal:u(0)},e={vertical:{ref:u(null),position:u(0),size:u(0)},horizontal:{ref:u(null),position:u(0),size:u(0)}},{proxy:d}=te(),P=se(t,d.$q);let c=null,h;const v=u(null),z=n(()=>"q-scrollarea"+(P.value===!0?" q-scrollarea--dark":""));e.vertical.percentage=n(()=>{const l=e.vertical.size.value-o.vertical.value;if(l<=0)return 0;const a=R(e.vertical.position.value/l,0,1);return Math.round(a*1e4)/1e4}),e.vertical.thumbHidden=n(()=>(t.visible===null?b.value:t.visible)!==!0&&S.value===!1&&m.value===!1||e.vertical.size.value<=o.vertical.value+1),e.vertical.thumbStart=n(()=>e.vertical.percentage.value*(o.vertical.value-e.vertical.thumbSize.value)),e.vertical.thumbSize=n(()=>Math.round(R(o.vertical.value*o.vertical.value/e.vertical.size.value,p(o.vertical.value),o.vertical.value))),e.vertical.style=n(()=>({...t.thumbStyle,...t.verticalThumbStyle,top:`${e.vertical.thumbStart.value}px`,height:`${e.vertical.thumbSize.value}px`})),e.vertical.thumbClass=n(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.vertical.barClass=n(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),e.horizontal.percentage=n(()=>{const l=e.horizontal.size.value-o.horizontal.value;if(l<=0)return 0;const a=R(Math.abs(e.horizontal.position.value)/l,0,1);return Math.round(a*1e4)/1e4}),e.horizontal.thumbHidden=n(()=>(t.visible===null?b.value:t.visible)!==!0&&S.value===!1&&m.value===!1||e.horizontal.size.value<=o.horizontal.value+1),e.horizontal.thumbStart=n(()=>e.horizontal.percentage.value*(o.horizontal.value-e.horizontal.thumbSize.value)),e.horizontal.thumbSize=n(()=>Math.round(R(o.horizontal.value*o.horizontal.value/e.horizontal.size.value,p(o.horizontal.value),o.horizontal.value))),e.horizontal.style=n(()=>({...t.thumbStyle,...t.horizontalThumbStyle,[d.$q.lang.rtl===!0?"right":"left"]:`${e.horizontal.thumbStart.value}px`,width:`${e.horizontal.thumbSize.value}px`})),e.horizontal.thumbClass=n(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.horizontal.barClass=n(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const L=n(()=>e.vertical.thumbHidden.value===!0&&e.horizontal.thumbHidden.value===!0?t.contentStyle:t.contentActiveStyle),N=[[G,l=>{$(l,"vertical")},void 0,{vertical:!0,...Z}]],Q=[[G,l=>{$(l,"horizontal")},void 0,{horizontal:!0,...Z}]];function H(){const l={};return K.forEach(a=>{const r=e[a];l[a+"Position"]=r.position.value,l[a+"Percentage"]=r.percentage.value,l[a+"Size"]=r.size.value,l[a+"ContainerSize"]=o[a].value}),l}const A=ce(()=>{const l=H();l.ref=d,g("scroll",l)},0);function q(l,a,r){if(K.includes(l)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(l==="vertical"?Y:V)(v.value,a,r)}function O({height:l,width:a}){let r=!1;o.vertical.value!==l&&(o.vertical.value=l,r=!0),o.horizontal.value!==a&&(o.horizontal.value=a,r=!0),r===!0&&y()}function C({position:l}){let a=!1;e.vertical.position.value!==l.top&&(e.vertical.position.value=l.top,a=!0),e.horizontal.position.value!==l.left&&(e.horizontal.position.value=l.left,a=!0),a===!0&&y()}function j({height:l,width:a}){e.horizontal.size.value!==a&&(e.horizontal.size.value=a,y()),e.vertical.size.value!==l&&(e.vertical.size.value=l,y())}function $(l,a){const r=e[a];if(l.isFirst===!0){if(r.thumbHidden.value===!0)return;h=r.position.value,m.value=!0}else if(m.value!==!0)return;l.isFinal===!0&&(m.value=!1);const _=J[a],k=o[a].value,le=(r.size.value-k)/(k-r.thumbSize.value),ae=l.distance[_.dist],ie=h+(l.direction===_.dir?1:-1)*ae*le;B(ie,a)}function M(l,a){const r=e[a];if(r.thumbHidden.value!==!0){const _=l[J[a].offset];if(_<r.thumbStart.value||_>r.thumbStart.value+r.thumbSize.value){const k=_-r.thumbSize.value/2;B(k/o[a].value*r.size.value,a)}r.ref.value!==null&&r.ref.value.dispatchEvent(new MouseEvent(l.type,l))}}function E(l){M(l,"vertical")}function I(l){M(l,"horizontal")}function y(){S.value=!0,c!==null&&clearTimeout(c),c=setTimeout(()=>{c=null,S.value=!1},t.delay),t.onScroll!==void 0&&A()}function B(l,a){v.value[J[a].scroll]=l}let i=null;function T(){i!==null&&clearTimeout(i),i=setTimeout(()=>{i=null,b.value=!0},d.$q.platform.is.ios?50:0)}function w(){i!==null&&(clearTimeout(i),i=null),b.value=!1}let D=null;return ee(()=>d.$q.lang.rtl,l=>{v.value!==null&&V(v.value,Math.abs(e.horizontal.position.value)*(l===!0?-1:1))}),ve(()=>{D={top:e.vertical.position.value,left:e.horizontal.position.value}}),he(()=>{if(D===null)return;const l=v.value;l!==null&&(V(l,D.left),Y(l,D.top))}),de(A.cancel),Object.assign(d,{getScrollTarget:()=>v.value,getScroll:H,getScrollPosition:()=>({top:e.vertical.position.value,left:e.horizontal.position.value}),getScrollPercentage:()=>({top:e.vertical.percentage.value,left:e.horizontal.percentage.value}),setScrollPosition:q,setScrollPercentage(l,a,r){q(l,a*(e[l].size.value-o[l].value)*(l==="horizontal"&&d.$q.lang.rtl===!0?-1:1),r)}}),()=>s("div",{class:z.value,onMouseenter:T,onMouseleave:w},[s("div",{ref:v,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:t.tabindex!==void 0?t.tabindex:void 0},[s("div",{class:"q-scrollarea__content absolute",style:L.value},fe(f.default,[s(W,{debounce:0,onResize:j})])),s(ge,{axis:"both",onScroll:C})]),s(W,{debounce:0,onResize:O}),s("div",{class:e.vertical.barClass.value,style:[t.barStyle,t.verticalBarStyle],"aria-hidden":"true",onMousedown:E}),s("div",{class:e.horizontal.barClass.value,style:[t.barStyle,t.horizontalBarStyle],"aria-hidden":"true",onMousedown:I}),X(s("div",{ref:e.vertical.ref,class:e.vertical.thumbClass.value,style:e.vertical.style.value,"aria-hidden":"true"}),N),X(s("div",{ref:e.horizontal.ref,class:e.horizontal.thumbClass.value,style:e.horizontal.style.value,"aria-hidden":"true"}),Q)])}});export{ye as Q,_e as a};
