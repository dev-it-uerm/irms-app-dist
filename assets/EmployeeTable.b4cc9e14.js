import{m as y,_ as E,o as n,g as c,w as a,e as s,h as u,a5 as D,ac as _,ab as v,d as l,a3 as f,a2 as g,Z as b,c as C,aX as S,Q as N}from"./index.d5855d0e.js";import{Q as w,a as Q}from"./QCardSection.519f9ade.js";import{a as T,Q as x}from"./QTd.db4cf0ff.js";import{Q as I}from"./QSpace.e472e4f8.js";import{Q as k}from"./QTooltip.cf3e383d.js";import{Q as F}from"./QBar.57a2bd77.js";import{Q as R}from"./QSpinnerIos.bb2dde87.js";import{Q as h}from"./QTable.a29c1a77.js";import{a as O}from"./QDialog.e2f94e03.js";import{C as A}from"./ClosePopup.2e6160b5.js";import"./QMarkupTable.dfaff9b9.js";import"./QSelect.f818cd02.js";const B={props:{items:{type:Array,required:!0},columns:{type:Array,required:!0}},data(){return{viewEms:!1,loading:!1,IRNo:"",DateTimeCreated:"",disDems:[]}},computed:{...y({demerit:"ApplyStore/demerit"})},methods:{FormatDate(o){return new Date(o).toISOString().split("T")[0]},async showEmplo(o,e){this.IRNo=o,this.DateTimeCreated=e,this.viewEms=!0,this.loading=!0;try{await this.viewEmployees(o)}catch(r){console.error("Error fetching data:",r)}finally{this.loading=!1}},async viewEmployees(o){try{const e={IRNo:o};await this.$store.dispatch("ApplyStore/disDemerit",e),this.disDems=this.demerit}catch(e){console.error("Error fetching data:",e)}},onCancel(){this.viewEms=!1,this.IRNo="",this.DateTimeCreated="",this.disDems=[]}}},V={style:{display:"flex","justify-content":"space-between",color:"#f3f4f7"}};function q(o,e,r,p,t,i){return n(),c(h,{rows:r.items,columns:r.columns,"row-key":"IRNo"},{"body-cell-viewEmp":a(m=>[s(T,null,{default:a(()=>[s(u,{push:"",onClick:d=>i.showEmplo(m.row.IRNo,m.row.DateTimeCreated),ripple:{center:!0},color:"accent",icon:"description",class:"text-black text-bold text-center shadow-5"},null,8,["onClick"]),s(O,{modelValue:t.viewEms,"onUpdate:modelValue":e[0]||(e[0]=d=>t.viewEms=d),persistent:"","full-width":""},{default:a(()=>[s(D,{class:"EOBG"},{default:a(()=>[s(F,null,{default:a(()=>[s(I),_((n(),c(u,{dense:"",flat:"",icon:"close",onClick:i.onCancel},{default:a(()=>[s(k,{class:"bg-white text-primary"},{default:a(()=>[v("Close")]),_:1})]),_:1},8,["onClick"])),[[A]])]),_:1}),s(w,{style:{border:"0.2em solid #f3f4f7","background-color":"#003566"}},{default:a(()=>[l("div",V,[l("div",null,[l("b",null,"IR NUMBER: "+f(t.IRNo),1)]),l("div",null,[l("b",null,"DATE CREATED: "+f(i.FormatDate(t.DateTimeCreated)),1)])])]),_:1}),t.loading?(n(),c(R,{key:0,class:"spinner",size:"160px",color:"primary",style:{"margin-left":"43.5%","margin-top":"3%"}})):g("",!0),s(h,{flat:"",bordered:"",rows:t.disDems,"hide-bottom":""},null,8,["rows"])]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)]),_:1},8,["rows","columns"])}var L=E(B,[["render",q]]);const M={data(){return{loading:!0,showTable:!1,search:"",disDemEmplo:[],disColumns:[{name:"IRNo",label:"IRNUMBER",align:"left",field:"IRNo"},{name:"section",label:"SECTION",align:"left",field:"DisciplineName"},{name:"viewEmp",label:"EMPLOYEE OFFENSES DETAILS",align:"left",field:"id"}]}},computed:{...y({getForm:"ApplyStore/getForm"}),filteredDisAll(){const{disDemEmplo:o,search:e}=this;let r=[...o];if(e&&typeof e=="string"){const p=e.toLowerCase();r=r.filter(t=>Object.values(t).some(i=>typeof i=="string"&&i.toLowerCase().includes(p)))}return r}},mounted(){setTimeout(()=>{this.showTable=!0,this.disDemEmplo,this.loading=!1},3e3)},components:{OFFENSES:L},created(){this.getEmployeeDem()},methods:{async getEmployeeDem(){try{await this.$store.dispatch("ApplyStore/disEmployeeDem"),this.disDemEmplo=this.getForm}catch(o){console.error("Error displaying data:",o)}}}},U={id:"q-app",style:{"min-height":"100vh"}},j={class:"q-pa-sm row items-start q-gutter-xs"},P={class:"my-card"},z={style:{display:"flex","justify-content":"space-between"}},G=l("div",{class:"EmpoText"},"EMPLOYEE OFFENSE",-1),Y={class:"q-gutter-md row",style:{display:"flex","align-items":"center"}};function X(o,e,r,p,t,i){const m=b("OFFENSES");return n(),C("div",U,[l("div",j,[l("div",P,[s(w,{class:"bg-primary text-white"},{default:a(()=>[l("div",z,[G,l("div",Y,[s(Q,{dark:"",dense:"",standout:"",modelValue:t.search,"onUpdate:modelValue":e[0]||(e[0]=d=>t.search=d),"input-class":"text-right",class:"q-ml-md",style:{"background-color":"#f3f4f7","border-radius":"0.4em"}},{append:a(()=>[s(N,{name:"search",style:{color:"black"}})]),_:1},8,["modelValue"])])])]),_:1}),t.loading?(n(),c(x,{key:0,class:"spinner",size:"150px",color:"primary"})):g("",!0),_(s(m,{items:i.filteredDisAll,columns:t.disColumns,loading:t.loading},null,8,["items","columns","loading"]),[[S,t.showTable]])])])])}var le=E(M,[["render",X]]);export{le as default};
