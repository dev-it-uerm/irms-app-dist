import{b9 as k,_ as S,o as r,g as d,w as a,e as t,Q as w,aV as _,a8 as y,ba as I,ab as U,a3 as u,aW as L,m as D,Y as A,Z as h,$ as Q,a0 as C,h as v,d as i,a7 as T,a9 as E,a1 as $,c as g,a2 as p,a6 as z,R as M,bb as O,aa as N}from"./index.d5855d0e.js";import{Q as V}from"./QSpace.e472e4f8.js";import{_ as q}from"./FINALPOST.e3800436.js";const x=k({name:"EssentialLink",props:{title:{type:String,required:!0},label:{type:String,required:!0},icon:{type:String,required:!0},link:{type:String,required:!1},iconSize:{type:String,default:"25px"},labelSize:{type:String,default:"16px"},isSelected:{type:Boolean,default:!1}}});function B(e,o,c,m,s,n){return r(),d(L,{clickable:"",active:e.isSelected,onClick:o[0]||(o[0]=f=>e.$emit("select")),"active-class":"my-active-item",class:"my-sidebar-item"},{default:a(()=>[t(_,{avatar:""},{default:a(()=>[t(w,{name:e.icon,size:e.iconSize},null,8,["name","size"])]),_:1}),t(_,null,{default:a(()=>[t(y,{style:I({fontSize:e.labelSize})},{default:a(()=>[U(u(e.label),1)]),_:1},8,["style"])]),_:1})]),_:1},8,["active"])}var F=S(x,[["render",B],["__scopeId","data-v-0777f985"]]);const H={name:"MainLayout",data(){return{FullName:"",topLine:"",bottomLine:"",leftDrawerOpen:!1,selectedLink:null,showTable:!0,avatarUrl:"https://localapi.uerm.edu.ph:8081/personnels/picture/"}},components:{EssentialLink:F},created(){const e=localStorage.getItem("accessModules");e&&this.$store.commit("ApplyStore/SET_MODULES",JSON.parse(e)),this.$store.dispatch("ApplyStore/initAuth").catch(c=>{console.error("Error initializing authentication:",c)});const o=localStorage.getItem("selectedLink");o&&(this.selectedLink=o,this.$router.push(o.replace("#","")))},computed:{...D({loggedInUser:"ApplyStore/getUser",getAccessModule:"ApplyStore/getAccessModule"}),isUserLoggedIn(){return!!this.loggedInUser&&!!this.loggedInUser.FullName}},mounted(){this.updateDateTime(),this.interval=setInterval(this.updateDateTime,1e3)},beforeUnmount(){clearInterval(this.interval)},methods:{...A("ApplyStore",["logoutAction"]),updateDateTime(){const e=new Date,o=e.toLocaleDateString("en-US",{weekday:"short"}).toUpperCase(),c=e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),[m,s]=c.split(" "),n=e.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}).toUpperCase();this.topLine=`${o} | ${m} | ${s}`,this.bottomLine=n},async logout(){try{await this.logoutAction(),localStorage.removeItem("accessModules"),this.$router.push("/IRLogout")}catch(e){console.error("Error logging out:",e)}},toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},navigateTo(e){this.selectedLink=e,localStorage.setItem("selectedLink",e),this.showTable=!1,this.$router.push(e.replace("#",""))}}},R={class:"text-accent text-weight-bold text-right q-mr-md"},G={class:"column items-center q-mt-x"},P=["src"],J={key:0,class:"item-lab"},W={key:1,class:"item-label1"},Y={class:"footer"},Z={class:"footer-content"},j=i("img",{src:q,alt:"Footer Logo",class:"footer-logo"},null,-1);function K(e,o,c,m,s,n){const f=h("EssentialLink"),b=h("router-view");return r(),d(Q,{view:"lHh Lpr lFf"},{default:a(()=>[t(T,{elevated:""},{default:a(()=>[t(C,{class:"q-ma-xs"},{default:a(()=>[t(v,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:n.toggleLeftDrawer},null,8,["onClick"]),t(V),i("div",R,[i("div",null,u(s.topLine),1),i("div",null,u(s.bottomLine),1)])]),_:1})]),_:1}),t(O,{modelValue:s.leftDrawerOpen,"onUpdate:modelValue":o[0]||(o[0]=l=>s.leftDrawerOpen=l),"show-if-above":"",bordered:"",class:"custom-drawer"},{default:a(()=>[n.isUserLoggedIn?(r(),d(E,{key:0,class:"custom-list"},{default:a(()=>[t(L,{class:"custom-item"},{default:a(()=>[t(_,null,{default:a(()=>[t(y,null,{default:a(()=>[i("div",G,[t($,{size:"120px"},{default:a(()=>[i("img",{src:s.avatarUrl+e.loggedInUser.EmployeeCode,style:{border:"2px solid #6b7c93"}},null,8,P)]),_:1})]),e.loggedInUser?(r(),g("p",J,u(e.loggedInUser.FullName),1)):p("",!0),e.loggedInUser?(r(),g("p",W,u(e.loggedInUser.Department_Description),1)):p("",!0)]),_:1})]),_:1})]),_:1}),(r(!0),g(M,null,z(e.getAccessModule,l=>(r(),d(f,{key:l.title,label:l.label,title:l.title,link:l.link,icon:l.icon,isSelected:s.selectedLink===l.link,onSelect:X=>n.navigateTo(l.link)},null,8,["label","title","link","icon","isSelected","onSelect"]))),128))]),_:1})):p("",!0),i("footer",Y,[i("div",Z,[n.isUserLoggedIn?(r(),d(v,{key:0,flat:"",rounded:"",push:"",icon:"logout",label:"LOGOUT",onClick:n.logout,class:"buttonLogoutDesign bg-negative text-white",style:{"font-weight":"bold",width:"200%"}},null,8,["onClick"])):p("",!0),j])])]),_:1},8,["modelValue"]),t(N,null,{default:a(()=>[t(b)]),_:1})]),_:1})}var oe=S(H,[["render",K]]);export{oe as default};
