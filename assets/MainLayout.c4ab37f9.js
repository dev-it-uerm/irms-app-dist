import{_ as q,m as F,Y as E,Z as N,o as l,g as R,w as a,$ as S,e as t,a0 as T,d as e,a1 as U,c as i,a2 as b,a3 as p,a4 as L,a5 as y,a6 as D,R as g,h as v,a7 as j,a8 as z,a9 as V,aa as M,Q as A,ab as I,ac as O,f as P}from"./index.a30eed6e.js";import{Q as u,a as w}from"./QDialog.9ee55c82.js";import{Q as Y}from"./QCardActions.f5318af1.js";import{Q,a as B}from"./QScrollArea.29deb719.js";import{Q as x,a as c}from"./QCardSection.24384664.js";import{Q as H}from"./QSpace.192dbcbf.js";import{Q as C}from"./QTooltip.49feba12.js";import{Q as W}from"./QMarkupTable.374e7333.js";import{C as G}from"./ClosePopup.452683c2.js";import{_ as J}from"./UERM Logos.13d54be0.js";var Z="/irms-app/assets/IRLogo.b3cb562e.png";const K={data(){return{showMenu:!1,reportForm:!1,avatarUrl:"https://localapi.uerm.edu.ph:8081/personnels/picture/",disReportList:[],disReportColumns:[{name:"subject",label:"SUBJECT OF THE INCIDENT",align:"left",field:"subjectName"},{name:"viewIR",label:"INCIDENT REPORT DETAILS",align:"left",field:"id"},{name:"qastatus",label:"INCIDENT REPORT STATUS",align:"left",field:"qAStatus"}],searchReport:"",IRDialog:!1,IRQADetailss:[],pdfDisplayDialog:!1}},computed:{...F({loggedInUser:"ApplyStore/getUser",getList:"ApplyStore/getList",getQACon:"ApplyStore/getQACon"}),accountFields(){return this.loggedInUser?[{label:"Employee Number",value:this.loggedInUser.EmployeeCode},{label:"Full Name",value:this.loggedInUser.FullName},{label:"Department",value:this.loggedInUser.Department_Description}]:[]},filterDisReport(){const{disReportList:n,searchReport:o}=this;if(!o||typeof o!="string")return n;const d=o.toLowerCase();return n.filter(f=>Object.values(f).some(s=>typeof s=="string"&&s.toLowerCase().includes(d)))}},methods:{...E("ApplyStore",["logoutAction","googlelogoutAction"]),async logout(){try{this.loggedInUser.UERMEmail?(await this.googlelogoutAction(),this.$router.push("/google-authlogout")):(await this.logoutAction(),this.$router.push("/LogoutPage"))}catch(n){console.error("Error logging out:",n)}},async openReportForm(n){this.showMenu=!1,await this.$nextTick(),this.reportForm=!0;try{const o={userCode:n};await this.$store.dispatch("ApplyStore/displayReportList",o),this.disReportList=this.getList}catch(o){console.error("Error dispatching addIReport:",o)}},FormatDateIR(n){const o=new Date(n),d={year:"numeric",month:"long",day:"2-digit"};return o.toLocaleDateString("en-US",d).toUpperCase().replace(/\s/g," ")},FormatDate(n){const o=new Date(n),d={year:"numeric",month:"long",day:"2-digit"};return o.toLocaleDateString("en-US",d).toUpperCase().replace(/\s/g," ")},FormatTime(n){const o=new Date(n);let d=o.getHours();const f=o.getMinutes().toString().padStart(2,"0"),s=d>=12?"PM":"AM";return d=d%12,d=d||12,`${d}:${f} ${s}`},viewPDF(n,o){this.pdfUrl="data:application/pdf;base64,"+n,this.pdfDisplayDialog=!0},async viewIReport(n){try{this.IRDialog=!0;const o={iRNo:n.iRNo},d=await this.$store.dispatch("ApplyStore/disIrp",o);this.IRQADetailss=this.getQACon}catch(o){console.error("Error inserting data:",o)}}}},X={class:"dis1"},$=["src"],ee={key:0,class:"labelhead text-weight-bold"},te={style:{margin:"15px"}},se=e("div",{class:"text-primary text-weight-bold q-mb-sm",style:{"font-size":"20px",color:"#002b5c"}}," ACCOUNT DETAILS ",-1),oe={class:"row items-center"},le={class:"text-caption q-pa-xs",style:{"font-size":"15px",color:"#737373"}},ie={class:"text-caption",style:{"font-size":"15px"}},ae={key:0,class:"text-weight-medium"},ne={class:"dis2"},re={class:"IRFORM"},de=e("div",{class:"text-primary text-weight-bold",style:{"font-size":"25px",color:"#002b5c"}}," INCIDENT REPORT LIST ",-1),ce={class:"row items-end justify-end q-mb-md q-mt-md"},ue={key:0,class:"text-bold text-center text-uppercase"},me={key:0},pe={class:"QADialog"},he=e("div",{class:"text-secondary text-weight-bold",style:{"font-size":"25px",color:"#002b5c"}}," INCIDENT REPORT INFORMATION ",-1),_e={class:"row q-col-gutter-md q-mx-lg"},ge={class:"col-6"},fe=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Incident Report Number ",-1),be={class:"col-6"},ve=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Date Report Created ",-1),xe={class:"QADesContent"},ye={class:"QAFixDesign"},De={class:"QADes1"},Ie=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," General Information ",-1),we=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," This section contains essential details regarding the incident, including the date, time, location, individuals involved, and the nature of the incident. ",-1),Re={class:"row q-col-gutter-md q-mx-lg"},Ae={class:"col-6"},Qe=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Primary (Department/s) ",-1),Ce={key:0},ke={key:1},qe={class:"col-6"},Fe=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Secondary (Department/s) ",-1),Ee={key:0},Ne={key:1},Se={class:"row q-col-gutter-md q-mx-lg q-mt-xs"},Te={class:"col-6"},Ue=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Subject of the Incident ",-1),Le={key:0},je={key:1},ze={class:"col-6"},Ve=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Location of the Incident ",-1),Me={class:"row q-col-gutter-md q-mx-lg q-mt-xs"},Oe={class:"col-6"},Pe=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Date of the Incident ",-1),Ye={class:"col-6"},Be=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Time of the Incident ",-1),He={class:"QADesContent"},We={class:"QAFixDesign"},Ge={class:"QADes1"},Je=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Attached File ",-1),Ze=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," The attached files support the accurate review and proper documentation of this incident report. ",-1),Ke={key:0,class:"QAFileDes column flex-center"},Xe={class:"text-dark text-left text-subtitle1"},$e={class:"bg-info text-white"},et=e("div",{class:"IRND"},"UPLOADED PDF FILES",-1),tt=["src"],st={key:1,class:"QAFileDes column flex-center"},ot=e("div",{class:"text-subtitle1 items-center text-weight-bold text-dark"},[e("i",null,"~ NO FILE ATTACHED ~")],-1),lt=[ot],it={class:"QADesContent"},at={class:"QAFixDesign"},nt={class:"QADes1"},rt=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Narrative Description of the Incident ",-1),dt=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," Provided detailed of how the incident transpired, including the sequence of events, contributing factors, and individuals involved. ",-1),ct={class:"q-mx-xl"},ut={class:"QADesContent"},mt={class:"QAFixDesign"},pt={class:"QADes1"},ht=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Possible Causes of the Incident ",-1),_t=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," Possible reason on the perspective of the Informant. ",-1),gt={class:"q-mx-xl"},ft={class:"QADesContent"},bt={class:"QAFixDesign"},vt={class:"QADes1"},xt=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Immediate Response ",-1),yt=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," Action taken by the concerned department or by the Informant to ease the incident. ",-1),Dt={class:"q-mx-xl"},It={key:0,class:"text-bold text-white text-center text-uppercase q-pa-sm",style:{"background-color":"#e67206"}},wt={key:1,class:"text-bold text-white text-center text-uppercase q-pa-sm",style:{"background-color":"#098b28"}},Rt={key:2,class:"text-bold text-white text-center text-uppercase q-pa-sm",style:{"background-color":"#fe0000"}};function At(n,o,d,f,s,m){const k=N("router-view");return l(),R(S,{view:"lHh Lpr lFf"},{default:a(()=>[t(j,{style:{height:"auto","background-color":"#003566"}},{default:a(()=>[t(T,{class:"container q-pa-xs"},{default:a(()=>[e("div",X,[t(U,{size:"80px",onClick:o[0]||(o[0]=r=>s.showMenu=!0)},{default:a(()=>[n.loggedInUser?(l(),i("img",{key:0,src:s.avatarUrl+n.loggedInUser.EmployeeCode},null,8,$)):b("",!0)]),_:1}),n.loggedInUser?(l(),i("div",ee," WELCOME, "+p(n.loggedInUser.FirstName),1)):b("",!0),t(L,{modelValue:s.showMenu,"onUpdate:modelValue":o[2]||(o[2]=r=>s.showMenu=r)},{default:a(()=>[t(y,{class:"custom-card justify-center"},{default:a(()=>[e("div",te,[se,t(u,{style:{"background-color":"#f0f2f5",height:"2px",margin:"10px 0 15px 0"}}),(l(!0),i(g,null,D(m.accountFields,(r,h)=>(l(),i("div",{class:"row items-center q-gutter-sm",key:h},[e("div",oe,[e("div",le,[e("strong",null,p(r.label)+": ",1)])]),e("div",ie,[n.loggedInUser?(l(),i("span",ae,p(r.value),1)):b("",!0)])]))),128))]),t(Y,{align:"center",class:"custom-card-actions"},{default:a(()=>[t(v,{flat:"",rounded:"",push:"",icon:"description",label:"View Report List",onClick:o[1]||(o[1]=r=>m.openReportForm(n.loggedInUser.EmployeeCode)),class:"buttonLogoutDesign1 bg-accent text-black",style:{"font-weight":"bold",width:"60%"}}),t(v,{flat:"",rounded:"",push:"",icon:"logout",label:"LOGOUT",onClick:m.logout,class:"buttonLogoutDesign bg-negative text-white",style:{"font-weight":"bold",width:"60%"}},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e("div",ne,[t(Q,{src:Z,class:"custom-image"}),t(Q,{src:J,class:"image"})])]),_:1})]),_:1}),t(V,null,{default:a(()=>[t(z)]),_:1}),t(M,null,{default:a(()=>[t(k)]),_:1}),t(w,{maximized:"",modelValue:s.reportForm,"onUpdate:modelValue":o[10]||(o[10]=r=>s.reportForm=r),persistent:""},{default:a(()=>[e("div",re,[t(y,{class:"contentForm"},{default:a(()=>[t(x,{class:"q-mb-sm row items-center justify-between"},{default:a(()=>[de,t(v,{flat:"",icon:"close",style:{color:"#003566","background-color":"rgba(22, 110, 204, 0.1)"},onClick:o[3]||(o[3]=r=>s.reportForm=!1)})]),_:1}),t(x,{class:"q-pa-sm",style:{border:"2px solid #e0e0e0"}},{default:a(()=>[e("div",ce,[t(H),t(c,{modelValue:s.searchReport,"onUpdate:modelValue":o[4]||(o[4]=r=>s.searchReport=r),label:"SEARCH ",dense:"",outlined:"",rounded:"",class:"q-ml-md"},{append:a(()=>[t(A,{name:"search",color:"info"})]),_:1},8,["modelValue"])]),e("div",null,[t(B,{style:{height:"670px"}},{default:a(()=>[t(W,{class:"custom-q-table"},{default:a(()=>[e("thead",null,[e("tr",null,[(l(!0),i(g,null,D(s.disReportColumns,r=>(l(),i("th",{key:r.name,class:"custom-header"},p(r.label),1))),128))])]),e("tbody",null,[(l(!0),i(g,null,D(m.filterDisReport,r=>(l(),i("tr",{key:r.id},[(l(!0),i(g,null,D(s.disReportColumns,h=>(l(),i("td",{key:h.name,class:"custom-cell"},[h.field==="subjectName"?(l(),i("span",ue,[I(p(r.subjectName)+" ",1),r.subjectSpecificExam?(l(),i("span",me," - "+p(r.subjectSpecificExam),1)):b("",!0)])):h.field==="id"?(l(),i(g,{key:1},[t(v,{flat:"",rounded:"",push:"",onClick:_=>m.viewIReport(r),ripple:{center:!0},icon:"description",class:"buttonYellowDesign bg-accent text-black shadow-3",style:{"border-radius":"20px",width:"125px"}},{default:a(()=>[t(C,{class:"bg-info text-white"},{default:a(()=>[I(" View Report Details ")]),_:1})]),_:2},1032,["onClick"]),t(w,{maximized:"",modelValue:s.IRDialog,"onUpdate:modelValue":o[9]||(o[9]=_=>s.IRDialog=_),persistent:""},{default:a(()=>[e("div",pe,[t(y,{class:"contentFormQA"},{default:a(()=>[t(x,{class:"q-mb-sm row items-center justify-between"},{default:a(()=>[he,O((l(),R(v,{flat:"",icon:"close",style:{color:"#003566","background-color":"rgba(22, 110, 204, 0.1)"},onClick:o[5]||(o[5]=_=>s.IRDialog=!1)},{default:a(()=>[t(C,{class:"bg-info text-white"},{default:a(()=>[I(" Close Form ")]),_:1})]),_:1})),[[G]])]),_:1}),t(x,{style:{border:"2px solid #6b7c93"}},{default:a(()=>[e("div",_e,[e("div",ge,[fe,t(c,{rounded:"",outlined:"","model-value":s.IRQADetailss.iRNo,disable:""},null,8,["model-value"])]),e("div",be,[ve,t(c,{rounded:"",outlined:"","model-value":m.FormatDateIR(s.IRQADetailss.dateTimeCreated),disable:""},null,8,["model-value"])])]),t(u,{class:"formseparatorWhite"}),e("div",xe,[e("div",ye,[e("div",De,[Ie,we,t(u,{class:"formseparatorYellow"}),e("div",Re,[e("div",Ae,[Qe,s.IRQADetailss.primaryDept?(l(),i("span",ke,[t(c,{rounded:"",outlined:"","model-value":s.IRQADetailss.primaryDept,disable:""},null,8,["model-value"])])):(l(),i("span",Ce,[t(c,{rounded:"",outlined:"",label:"Not Assigned",disable:""})]))]),e("div",qe,[Fe,s.IRQADetailss.deptCodeInvDescriptions?(l(),i("span",Ne,[t(c,{rounded:"",outlined:"",autogrow:"","model-value":s.IRQADetailss.deptCodeInvDescriptions,disable:""},null,8,["model-value"])])):(l(),i("span",Ee,[t(c,{rounded:"",outlined:"",label:"Not Assigned",disable:""})]))])]),e("div",Se,[e("div",Te,[Ue,s.IRQADetailss.subjectSpecificExam?(l(),i("span",Le,[t(c,{autogrow:"",rounded:"",outlined:"","model-value":s.IRQADetailss.subjectName+" - "+s.IRQADetailss.subjectSpecificExam,disable:""},null,8,["model-value"])])):s.IRQADetailss.subjectSpecificExam===null?(l(),i("span",je,[t(c,{rounded:"",outlined:"","model-value":s.IRQADetailss.subjectName,disable:""},null,8,["model-value"])])):b("",!0)]),e("div",ze,[Ve,t(c,{rounded:"",outlined:"","model-value":s.IRQADetailss.subjectLoc,disable:""},null,8,["model-value"])])]),e("div",Me,[e("div",Oe,[Pe,t(c,{rounded:"",outlined:"","model-value":m.FormatDate(s.IRQADetailss.subjectDate),disable:""},null,8,["model-value"])]),e("div",Ye,[Be,t(c,{rounded:"",outlined:"","model-value":m.FormatTime(s.IRQADetailss.subjectTime),disable:""},null,8,["model-value"])])])])])]),t(u,{class:"formseparatorWhite"}),e("div",He,[e("div",We,[e("div",Ge,[Je,Ze,t(u,{class:"formseparatorYellow"}),s.IRQADetailss.subjectFile&&s.IRQADetailss.subjectFile.length?(l(),i("div",Ke,[e("div",{style:{display:"flex","align-items":"center",gap:"8px",background:"#e3f2fd",padding:"8px","border-radius":"4px"},onClick:o[6]||(o[6]=P(_=>m.viewPDF(s.IRQADetailss.subjectFile,s.IRQADetailss.subjectFileName),["stop"]))},[t(A,{name:"description",class:"text-h3",color:"red"}),e("div",Xe,p(s.IRQADetailss.subjectFileName),1)]),t(w,{modelValue:s.pdfDisplayDialog,"onUpdate:modelValue":o[8]||(o[8]=_=>s.pdfDisplayDialog=_)},{default:a(()=>[t(y,{style:{width:"90vw","max-width":"1100px"}},{default:a(()=>[e("div",$e,[et,t(v,{icon:"close",flat:"",round:"",dense:"",onClick:o[7]||(o[7]=_=>s.pdfDisplayDialog=!1),class:"absolute-top-right"})]),t(x,null,{default:a(()=>[n.pdfUrl?(l(),i("iframe",{key:0,src:n.pdfUrl,width:"100%",height:"600px",style:{border:"none"}},null,8,tt)):b("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):(l(),i("div",st,lt))])])]),t(u,{class:"formseparatorWhite"}),e("div",it,[e("div",at,[e("div",nt,[rt,dt,t(u,{class:"formseparatorYellow"}),e("div",ct,[t(c,{autogrow:"",rounded:"",outlined:"","model-value":s.IRQADetailss.subjectNote,disable:"","input-class":"q-pa-md"},null,8,["model-value"])])])])]),t(u,{class:"formseparatorWhite"}),e("div",ut,[e("div",mt,[e("div",pt,[ht,_t,t(u,{class:"formseparatorYellow"}),e("div",gt,[t(c,{autogrow:"",rounded:"",outlined:"","model-value":s.IRQADetailss.subjectCause,disable:"","input-class":"q-pa-md"},null,8,["model-value"])])])])]),t(u,{class:"formseparatorWhite"}),e("div",ft,[e("div",bt,[e("div",vt,[xt,yt,t(u,{class:"formseparatorYellow"}),e("div",Dt,[t(c,{autogrow:"",rounded:"",outlined:"","model-value":s.IRQADetailss.subjectResponse,disable:"","input-class":"q-pa-md"},null,8,["model-value"])])])])])]),_:1})]),_:1})])]),_:1},8,["modelValue"])],64)):h.field==="qAStatus"?(l(),i(g,{key:2},[r.isReject===!1?(l(),i("span",It," REJECTED ")):r.qAStatus===!0?(l(),i("span",wt," IN PROGRESS ")):(l(),i("span",Rt," CLOSED "))],64)):(l(),i(g,{key:3},[I(p(r[h.field]),1)],64))]))),128))]))),128))])]),_:1})]),_:1})])]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),_:1})}var Lt=q(K,[["render",At]]);export{Lt as default};
