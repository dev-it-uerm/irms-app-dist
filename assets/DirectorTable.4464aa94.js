import{a as v,Q as k}from"./QTd.2e78f807.js";import{m as N,_ as A,o as n,g as R,w as i,e as t,h as _,ab as w,d as e,a5 as g,ac as y,c as u,a2 as D,a3 as b,R as q,a6 as Q,f as E,Q as S,Z as F,aX as j}from"./index.ccb16594.js";import{Q as f,a as c}from"./QCardSection.7dacab2c.js";import{Q as I}from"./QTooltip.1816065b.js";import{a as x,Q as p}from"./QDialog.6a9a0ad3.js";import{Q as z}from"./QCardActions.3d349c86.js";import{Q as H}from"./QSpinnerFacebook.ed334b3c.js";import{Q as U}from"./QTable.b88a5773.js";import{C}from"./ClosePopup.a1a4abcc.js";import{_ as V}from"./OMBRE-GRAY.d27a82e0.js";import"./QMarkupTable.0d3ea349.js";import"./QSelect.6aa8feb8.js";const P={props:{items:Array,columns:Array,getDirectors:Function},data(){return{IRDirectorDetailss:[],IRDialog:!1,setHRRecom:!1,HRRec:null,QAReferral:null,waitplease:!1,pdfDisplayDialog:!1,pdfUrl:null,maximizedToggle:null,subjectFileName:null,iRNo:""}},computed:{...N({getDirector:"ApplyStore/getDirector"})},methods:{FormatDate(l){const o=new Date(l),r={year:"numeric",month:"long",day:"2-digit"};return o.toLocaleDateString("en-US",r).toUpperCase().replace(/\s/g," ")},FormatDateIR(l){const o=new Date(l),r={year:"numeric",month:"long",day:"2-digit"};return o.toLocaleDateString("en-US",r).toUpperCase().replace(/\s/g," ")},FormatTime(l){const o=new Date(l);let r=o.getHours();const h=o.getMinutes().toString().padStart(2,"0"),s=r>=12?"PM":"AM";return r=r%12,r=r||12,`${r}:${h} ${s}`},async viewIReport(l){try{this.IRDialog=!0;const o={iRNo:l},r=await this.$store.dispatch("ApplyStore/disDirectorIrp",o);this.IRDirectorDetailss=this.getDirector}catch(o){console.error("Error inserting data:",o)}},viewPDF(l){this.pdfUrl="data:application/pdf;base64,"+l,this.pdfDisplayDialog=!0},HRRecommendation(l){this.setHRRecom=!0,this.IrNo=l},onCancelHRRecom(){this.setHRRecom=!1},async submitHRRecommendation(l){try{const o={IRNo:this.IrNo,HRRec:l};this.waitplease=!0,this.onCancelHRRecom(),await this.$store.dispatch("ApplyStore/addHRRecommendation",o),setTimeout(()=>{this.getDirectors(),this.waitplease=!1},2e3),this.$q.notify({color:"green-8",position:"top",message:"SUCCESS GIVING RECOMMENDATION",icon:"check",iconColor:"white",timeout:3e3,progress:!0})}catch(o){console.error("Error creating action items:",o)}}}},O={class:"QADialog"},L=e("div",{class:"text-secondary text-weight-bold",style:{"font-size":"25px",color:"#002b5c"}}," INCIDENT REPORT INFORMATION ",-1),M={class:"row q-col-gutter-md q-mx-lg"},B={class:"col-6"},G=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Incident Report Number ",-1),Y={class:"col-6"},W=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Date Report Created ",-1),J={class:"QADesContent"},X={class:"QAFixDesign"},Z={class:"QADes1"},K=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," General Information ",-1),$=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," This section contains essential details regarding the incident, including the date, time, location, individuals involved, and the nature of the incident. ",-1),ee={class:"row q-col-gutter-md q-mx-lg"},te={class:"col-6"},se=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Primary (Department/s) ",-1),oe={key:0},ie={key:1},le={class:"col-6"},re=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Secondary (Department/s) ",-1),ae={key:0},ne={key:1},de={class:"row q-col-gutter-md q-mx-lg q-mt-xs"},ce={class:"col-6"},ue=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Subject of the Incident ",-1),me={key:0},pe={key:1},he={class:"col-6"},_e=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Location of the Incident ",-1),fe={class:"row q-col-gutter-md q-mx-lg q-mt-xs"},be={class:"col-6"},De=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Date of the Incident ",-1),ge={class:"col-6"},xe=e("div",{class:"text-weight-bold",style:{"font-size":"15px",color:"#03254b"}}," Time of the Incident ",-1),ve={class:"QADesContent"},ye={class:"QAFixDesign"},Re={class:"QADes1"},we=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Attached File ",-1),Ie=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," The attached files support the accurate review and proper documentation of this incident report. ",-1),Ce={class:"text-red text-subtitle2 text-weight-bold q-mb-sx q-mx-xl"},Ne={key:0,class:"QAFileDes row flex-start q-mx-xl",style:{"border-radius":"25px"}},Ae=["onClick"],qe={style:{display:"flex","align-items":"center",gap:"10px","background-color":"#f5f5f5",padding:"8px 12px","border-radius":"6px",border:"1px solid #dcdcdc",width:"fit-content"}},Se={class:"text-dark text-subtitle2"},Te={class:"bg-info text-white"},ke=e("div",{class:"IRND"},"UPLOADED PDF FILES",-1),Qe=["src"],Ee={key:1,class:"QAFileDes column flex-center q-mx-xl",style:{"border-radius":"25px"}},Fe=e("div",{class:"text-subtitle1 items-center text-weight-bold text-dark"},[e("i",null,"~ NO FILE ATTACHED ~")],-1),je=[Fe],ze={class:"QADesContent"},He={class:"QAFixDesign"},Ue={class:"QADes1"},Ve=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Narrative Description of the Incident ",-1),Pe=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," Provided detailed of how the incident transpired, including the sequence of events, contributing factors, and individuals involved. ",-1),Oe={class:"q-mx-xl"},Le={class:"QADesContent"},Me={class:"QAFixDesign"},Be={class:"QADes1"},Ge=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Possible Causes of the Incident ",-1),Ye=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," Possible reason on the perspective of the Informant. ",-1),We={class:"q-mx-xl"},Je={class:"QADesContent"},Xe={class:"QAFixDesign"},Ze={class:"QADes1"},Ke=e("div",{class:"text-primary text-subtitle1 text-weight-bold q-mb-sx"}," Immediate Response ",-1),$e=e("div",{class:"q-mb-sm",style:{"font-size":"15px",color:"#737373"}}," Action taken by the concerned department or by the Informant to ease the incident. ",-1),et={class:"q-mx-xl"},tt={key:0,class:"text-bold text-center text-uppercase"},st={key:1,class:"text-bold text-center text-uppercase"},ot=e("div",{class:"text-secondary text-weight-bold",style:{"font-size":"25px",color:"#002b5c"}}," RECOMMENDATION ",-1),it=e("div",{class:"q-mb-sm q-pa-sm",style:{"font-size":"18px",color:"#000000"}}," Is this incident report (IR) something that should be referred to HR? ",-1),lt={class:"row q-gutter-xxl justify-center"},rt={class:"spinner-container"},at=e("div",{class:"please-wait"},"Doing something. Please wait...",-1);function nt(l,o,r,h,s,d){return n(),R(U,{rows:r.items,columns:r.columns,"row-key":"IRNo"},{"body-cell-viewIR":i(m=>[t(v,null,{default:i(()=>[t(_,{flat:"",rounded:"",push:"",onClick:a=>d.viewIReport(m.row.iRNo),ripple:{center:!0},icon:"description",class:"bg-accent text-black text-bold text-center shadow-5",style:{"border-radius":"20px",width:"125px"}},{default:i(()=>[t(I,{class:"bg-info text-white"},{default:i(()=>[w(" View Report Details ")]),_:1})]),_:2},1032,["onClick"]),t(x,{maximized:"",modelValue:s.IRDialog,"onUpdate:modelValue":o[3]||(o[3]=a=>s.IRDialog=a),persistent:""},{default:i(()=>[e("div",O,[t(g,{class:"contentFormQA"},{default:i(()=>[t(f,{class:"q-mb-sm row items-center justify-between"},{default:i(()=>[L,y((n(),R(_,{flat:"",icon:"close",style:{color:"#003566","background-color":"rgba(22, 110, 204, 0.1)"},onClick:o[0]||(o[0]=a=>s.IRDialog=!1)},{default:i(()=>[t(I,{class:"bg-info text-white"},{default:i(()=>[w(" Close Form ")]),_:1})]),_:1})),[[C]])]),_:1}),t(f,{style:{border:"2px solid #6b7c93"}},{default:i(()=>[e("div",M,[e("div",B,[G,t(c,{rounded:"",outlined:"","model-value":s.IRDirectorDetailss.iRNo,disable:""},null,8,["model-value"])]),e("div",Y,[W,t(c,{rounded:"",outlined:"","model-value":d.FormatDateIR(s.IRDirectorDetailss.dateTimeCreated),disable:""},null,8,["model-value"])])]),t(p,{class:"formseparatorWhite"}),e("div",J,[e("div",X,[e("div",Z,[K,$,t(p,{class:"formseparatorYellow"}),e("div",ee,[e("div",te,[se,s.IRDirectorDetailss.primaryDept?(n(),u("span",ie,[t(c,{rounded:"",outlined:"","model-value":s.IRDirectorDetailss.primaryDept,disable:""},null,8,["model-value"])])):(n(),u("span",oe,[t(c,{rounded:"",outlined:"",label:"Not Assigned",disable:""})]))]),e("div",le,[re,s.IRDirectorDetailss.deptCodeInvDescriptions?(n(),u("span",ne,[t(c,{rounded:"",outlined:"","model-value":s.IRDirectorDetailss.deptCodeInvDescriptions,disable:""},null,8,["model-value"])])):(n(),u("span",ae,[t(c,{rounded:"",outlined:"",label:"Not Assigned",disable:""})]))])]),e("div",de,[e("div",ce,[ue,s.IRDirectorDetailss.subjectSpecificExam?(n(),u("span",me,[t(c,{rounded:"",outlined:"","model-value":s.IRDirectorDetailss.subjectName+" - "+s.IRDirectorDetailss.subjectSpecificExam,disable:""},null,8,["model-value"])])):s.IRDirectorDetailss.subjectSpecificExam===null?(n(),u("span",pe,[t(c,{rounded:"",outlined:"","model-value":s.IRDirectorDetailss.subjectName,disable:""},null,8,["model-value"])])):D("",!0)]),e("div",he,[_e,t(c,{rounded:"",outlined:"","model-value":s.IRDirectorDetailss.subjectLoc,disable:""},null,8,["model-value"])])]),e("div",fe,[e("div",be,[De,t(c,{rounded:"",outlined:"","model-value":d.FormatDate(s.IRDirectorDetailss.subjectDate),disable:""},null,8,["model-value"])]),e("div",ge,[xe,t(c,{rounded:"",outlined:"","model-value":d.FormatTime(s.IRDirectorDetailss.subjectTime),disable:""},null,8,["model-value"])])])])])]),t(p,{class:"formseparatorWhite"}),e("div",ve,[e("div",ye,[e("div",Re,[we,Ie,t(p,{class:"formseparatorYellow"}),e("div",Ce," Number of file: "+b(s.IRDirectorDetailss.totalAttachments),1),s.IRDirectorDetailss.files&&s.IRDirectorDetailss.files.length?(n(),u("div",Ne,[(n(!0),u(q,null,Q(s.IRDirectorDetailss.files,(a,T)=>(n(),u("div",{key:T,style:{display:"flex","align-items":"start",gap:"5px",background:"#e3f2fd",padding:"8px","border-radius":"4px","margin-bottom":"5px",cursor:"pointer"},onClick:E(Dt=>d.viewPDF(a.subjectFile,a.subjectFileName),["stop"])},[e("div",qe,[t(S,{name:"description",size:"24px",color:"grey-7"}),e("div",Se,b(a.subjectFileName),1)])],8,Ae))),128)),t(x,{modelValue:s.pdfDisplayDialog,"onUpdate:modelValue":o[2]||(o[2]=a=>s.pdfDisplayDialog=a)},{default:i(()=>[t(g,{style:{width:"90vw","max-width":"1100px"}},{default:i(()=>[e("div",Te,[ke,t(_,{icon:"close",flat:"",round:"",dense:"",onClick:o[1]||(o[1]=a=>s.pdfDisplayDialog=!1),class:"absolute-top-right"})]),t(f,null,{default:i(()=>[s.pdfUrl?(n(),u("iframe",{key:0,src:s.pdfUrl,width:"100%",height:"600px",style:{border:"none"}},null,8,Qe)):D("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):(n(),u("div",Ee,je))])])]),t(p,{class:"formseparatorWhite"}),e("div",ze,[e("div",He,[e("div",Ue,[Ve,Pe,t(p,{class:"formseparatorYellow"}),e("div",Oe,[t(c,{autogrow:"",rounded:"",outlined:"","model-value":s.IRDirectorDetailss.subjectNote,disable:"","input-class":"q-pa-md"},null,8,["model-value"])])])])]),t(p,{class:"formseparatorWhite"}),e("div",Le,[e("div",Me,[e("div",Be,[Ge,Ye,t(p,{class:"formseparatorYellow"}),e("div",We,[t(c,{autogrow:"",rounded:"",outlined:"","model-value":s.IRDirectorDetailss.subjectCause,disable:"","input-class":"q-pa-md"},null,8,["model-value"])])])])]),t(p,{class:"formseparatorWhite"}),e("div",Je,[e("div",Xe,[e("div",Ze,[Ke,$e,t(p,{class:"formseparatorYellow"}),e("div",et,[t(c,{autogrow:"",rounded:"",outlined:"","model-value":s.IRDirectorDetailss.subjectResponse,disable:"","input-class":"q-pa-md"},null,8,["model-value"])])])])])]),_:1})]),_:1})])]),_:1},8,["modelValue"])]),_:2},1024)]),"body-cell-subject":i(m=>[t(v,{props:m},{default:i(()=>[m.row.subjectSpecificExam?D("",!0):(n(),u("span",tt,b(m.row.subjectName),1)),m.row.subjectSpecificExam?(n(),u("span",st,b(m.row.subjectName)+" - "+b(m.row.subjectSpecificExam),1)):D("",!0)]),_:2},1032,["props"])]),"body-cell-hrRef":i(m=>[t(v,null,{default:i(()=>[t(_,{disable:m.row.hrReferral!==null,onClick:a=>d.HRRecommendation(m.row.iRNo),icon:"healing",class:"bg-positive text-white text-bold text-center",style:{"border-radius":"20px",width:"125px"}},null,8,["disable","onClick"]),t(x,{modelValue:s.setHRRecom,"onUpdate:modelValue":o[7]||(o[7]=a=>s.setHRRecom=a),persistent:""},{default:i(()=>[t(g,{class:"IRCON"},{default:i(()=>[t(f,{class:"q-mb-sm row items-center justify-between"},{default:i(()=>[ot,y(t(_,{flat:"",icon:"close",style:{color:"#166ecc","background-color":"rgba(22, 110, 204, 0.1)"},onClick:o[4]||(o[4]=a=>s.setHRRecom=!1)},null,512),[[C]])]),_:1}),t(p,{class:"formseparatorBlue"}),t(z,{align:"center",class:"q-mt-md column items-center justify-center",style:{"text-align":"center"}},{default:i(()=>[it,e("div",lt,[t(_,{flat:"",rounded:"",push:"",label:"NO",class:"buttonCancelDesign text-info",onClick:o[5]||(o[5]=a=>d.submitHRRecommendation(2))}),t(_,{flat:"",rounded:"",push:"",label:"YES",class:"buttonSaveDesign bg-accent text-black",onClick:o[6]||(o[6]=a=>d.submitHRRecommendation(1))})])]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(x,{modelValue:s.waitplease,"onUpdate:modelValue":o[8]||(o[8]=a=>s.waitplease=a),persistent:"","content-class":"non-transparent-dialog"},{default:i(()=>[t(g,{class:"centered-card"},{default:i(()=>[t(f,null,{default:i(()=>[e("div",rt,[t(H,{size:"100px"}),at])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:2},1024)]),_:1},8,["rows","columns"])}var dt=A(P,[["render",nt]]);const ct={data(){return{loading:!0,showTable:!1,selectedStatus:null,searchContent:"",disAllDirector:[],disColumns:[{name:"viewIR",label:"INCIDENT REPORT DETAILS",align:"left",field:"id"},{name:"IRNo",label:"IR NUMBER",align:"left",field:"iRNo"},{name:"departmentNumber",label:"INCIDENT RESPONDER (DEPARTMENT)",align:"left",field:"department_Description"},{name:"subject",label:"SUBJECT OF THE INCIDENT",align:"left",field:"subjectName"},{name:"hrRef",label:"HR REFFERAL",align:"left",field:"id"}]}},computed:{...N({getDirector:"ApplyStore/getDirector",getGoogleUser:"ApplyStore/getGoogleUser",loggedInUser:"ApplyStore/getUser"}),filteredDisAll(){const{disAllDirector:l,searchContent:o}=this;let r=[...l];if(o&&typeof o=="string"){const h=o.toLowerCase();r=r.filter(s=>Object.values(s).some(d=>typeof d=="string"&&d.toLowerCase().includes(h)))}return r}},mounted(){setTimeout(()=>{this.showTable=!0,this.disAllDirector,this.loading=!1},2e3)},created(){this.getDirectors()},components:{DirectorTable:dt},methods:{async getDirectors(){try{await this.$store.dispatch("ApplyStore/disDirector"),this.disAllDirector=this.getDirector}catch(l){console.error("Error inserting data:",l)}},search(){},async selectStatus(l){this.selectedStatus=l}}},ut={id:"q-app",style:{"min-height":"100vh",position:"relative","z-index":"1"}},mt=e("div",{class:"row items-center justify-between q-ma-lg q-mb-md bg-white q-pa-sm rounded-borders shadow-1",style:{"border-radius":"10px"}},[e("div",null,[e("div",{class:"text-primary text-weight-bold",style:{"font-size":"30px"}}," DIRECTORS & VPS MODULE "),e("div",{style:{"font-size":"18px",color:"#333333"}}," Incident Report Details ")])],-1),pt={key:0,class:"fixed-full flex flex-center column q-gutter-md",style:{"background-color":"rgba(255, 255, 255, 0.7)","z-index":"9999"}},ht=e("div",{class:"text-subtitle1 text-primary"},"Please wait...",-1),_t={class:"row items-end justify-end q-gutter-md q-pa-sm"},ft=e("img",{src:V,style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%","z-index":"0"}},null,-1);function bt(l,o,r,h,s,d){const m=F("DirectorTable",!0);return n(),u(q,null,[e("div",ut,[mt,t(f,{class:"row q-mb-sm bg-white q-ma-lg q-pa-md rounded-borders shadow-1",style:{"border-radius":"10px"}},{default:i(()=>[s.loading?(n(),u("div",pt,[t(k,{size:"150px",color:"primary"}),ht])):D("",!0),t(f,{class:"column fit full-width"},{default:i(()=>[e("div",_t,[t(c,{modelValue:s.searchContent,"onUpdate:modelValue":o[0]||(o[0]=a=>s.searchContent=a),label:"SEARCH ",dense:"",outlined:"",rounded:""},{append:i(()=>[t(S,{name:"search",color:"info"})]),_:1},8,["modelValue"])]),y(t(m,{rows:d.filteredDisAll,pagination:{rowsPerPage:11},columns:s.disColumns,"row-key":"IRNo",loading:s.loading,getDirectors:d.getDirectors},null,8,["rows","columns","loading","getDirectors"]),[[j,s.showTable]])]),_:1})]),_:1})]),ft],64)}var Tt=A(ct,[["render",bt]]);export{Tt as default};
